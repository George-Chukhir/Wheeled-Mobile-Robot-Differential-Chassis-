# Differential Drive Robot Keyboard Control Simulation

## About This Project

This project simulates a differential drive mobile robot that can be controlled in real-time using keyboard inputs. The simulation calculates and logs the robot's trajectory and velocities, which can then be visualized using a MATLAB script. This corresponds to Task 4 of a robotics assignment, focusing on implementing kinematic equations for a differential drive chassis and providing interactive control. [cite: 2, 12]

## How It Works

The project consists of two main parts:

1.  **Java Simulation (`MainSimulation.java`):**
    * Handles the real-time simulation of the robot's movement.
    * Calculates the robot's position ($x_T, y_T$) and orientation ($\phi$) based on its linear velocity ($v_T$) and angular velocity ($\omega_T$).
    * Responds to keyboard inputs to adjust $v_T$ and $\omega_T$.
    * Logs the robot's state (time, position, orientation, linear and angular velocities, and individual wheel speeds) to a `robot_log_java.csv` file at regular time intervals ($\Delta t_{sim} = 0.1s$).
    * The robot has a wheel track (L) of 0.2 meters. [cite: 3]

2.  **MATLAB Visualization (`uloha_4.m`):**
    * Reads the `robot_log_java.csv` file generated by the Java simulation.
    * Plots the following:
        * Velocities of the left wheel, right wheel, and the robot's center of mass ($v_T$) over time. [cite: 13]
        * The angular velocity ($\omega_T$) of the robot's center of mass over time.
        * The trajectories of the left wheel, right wheel, and the robot's center of mass in a 2D plane. [cite: 13]

## Key Controls (Java Simulation)

While the Java simulation window is active:

* **W:** Increase forward linear velocity ($v_T$).
* **S:** Decrease forward linear velocity ($v_T$) (can result in backward motion).
* **A:** Increase angular velocity ($\omega_T$ - turns the robot left).
* **D:** Decrease angular velocity ($\omega_T$ - turns the robot right).
* **Q:** Set linear velocity ($v_T$) to 0.
* **R:** Set angular velocity ($\omega_T$) to 0.
* **SPACE:** Set both linear ($v_T$) and angular velocity ($\omega_T$) to 0 (emergency stop).
* **ESC:** Stop the simulation and save the logged data to `robot_log_java.csv`.

## Getting Started

### Prerequisites

* Java Development Kit (JDK) installed to compile and run the simulation.
* MATLAB installed to run the visualization script.

### Running the Simulation and Visualization

1.  **Compile and Run the Java Simulation:**
    * Open a terminal or command prompt.
    * Navigate to the directory containing `MainSimulation.java`.
    * Compile the Java code: `javac MainSimulation.java`
    * Run the simulation: `java MainSimulation`
    * A small window titled "Robot Control (Java) - Esc to Exit" will appear. Make sure this window is in focus to capture keyboard inputs.

2.  **Control the Robot:**
    * Use the W, A, S, D, Q, R, and SPACE keys as described above to control the robot.
    * The console will print the current velocities upon key presses.

3.  **Stop the Simulation:**
    * Press the **ESC** key. This will close the simulation window and save the collected data into `robot_log_java.csv` in the same directory.

4.  **Visualize the Results:**
    * Open MATLAB.
    * Navigate to the directory containing `uloha_4.m` and the generated `robot_log_java.csv`.
    * Run the script by typing `uloha_4` in the MATLAB command window and pressing Enter.
    * MATLAB will generate plots showing the robot's velocities and trajectories.

## Output

The Java simulation produces:
* `robot_log_java.csv`: A comma-separated values file containing columns for Time (s), $x_T$ (m), $y_T$ (m), $\phi$ (rad), $v_T$ (m/s), $\omega_T$ (rad/s), $v_L$ (m/s), $v_R$ (m/s).

The MATLAB script produces:
* A figure showing the time profiles of the left wheel, right wheel, and center of mass linear velocities.
* A figure showing the time profile of the center of mass angular velocity.
* A figure showing the 2D trajectories of the left wheel, right wheel, and center of mass, including start and end points.

This setup allows for interactive control of a simulated robot and subsequent analysis of its motion.